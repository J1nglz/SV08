[gcode_shell_command BACKUP_CONFIG]
description: Perform Git backup of all configuration files with timestamp and tag
command: |
  cd ~/printer_data/config && \
  git add -A && \
  git commit -m "Auto backup $(date '+%Y-%m-%d %H:%M:%S')" || echo "No changes to commit" && \
  git tag -a "auto-$(date '+%Y%m%d%H%M%S')" -m "Automatic savepoint $(date '+%Y-%m-%d %H:%M:%S')" && \
  git push origin main --tags
timeout: 90
verbose: True

[gcode_macro BACKUP_CONFIG]
description: Creates a full Git backup of all configs and pushes to remote
gcode:
  RUN_SHELL_COMMAND CMD=BACKUP_CONFIG
  RESPOND PREFIX="info" MSG="Configuration backup complete and pushed to GitHub."
